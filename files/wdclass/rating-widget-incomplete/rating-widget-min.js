document.addEventListener("DOMContentLoaded",function(){var h=document.querySelectorAll("form.rating-widget");for(var e=0;e<h.length;e++){var a=h[e],k=a.querySelector('input[type="range"]'),m=k.getAttribute("max"),l=k.value,c=document.createElement("span");c.className="rating-widget";for(var d=m;d>0;d--){var g=document.createElement("a"),b=d;g.href="#rating-"+b;if(l&&b==l){g.className="selected"}g.addEventListener("click",rate,false);c.appendChild(g)}k.parentNode.replaceChild(c,k);var f=a.getElementsByTagName("button")[0];if(f){f.parentNode.removeChild(f)}}},false);function rate(a){var f=new XMLHttpRequest(),d=this,c=this.parentNode,b=document.createElement("img");while(c.nodeName.toLowerCase()!="form"){c=c.parentNode}var g=c.method;this.blur();var e="rating="+this.getAttribute("href").substr(8);f.open(g,c.action+(g=="GET"?"?"+e:""),true);if(d.method=="POST"){f.setRequestHeader("Content-Type","x-www-form-urlencoded")}f.onreadystatechange=function(h){if(f.readyState==4){d.parentNode.removeChild(b);if(f.status==200||f.status==304){var k=f.responseXML;if(k){var j=d.parentNode.getElementsByTagName("a");for(var l=0;l<j.length;l++){j[l].removeAttribute("class")}d.className="selected-by-me";var m=k.getElementsByTagName("average")[0].firstChild.nodeValue,n=k.getElementsByTagName("votes")[0].firstChild.nodeValue;d.parentNode.title=m+" average, "+n+" votes"}}else{alert("Error "+f.status+": "+f.statusText)}}};f.send(g=="POST"?e:null);b.src="progress.gif";b.alt="Please wait...";this.parentNode.insertBefore(b,this.parentNode.firstChild);a.preventDefault()};